<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="只记空山，只念新雨">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      重走Java基础之Streams 三 | 一叶知秋
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


</head>
<div class="wechat-share">
  <img src="/css/images/logo.png">
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>一叶知秋</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>重走Java基础之Streams 三</h2>
  <p class="post-date">2017-01-15</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="重走Java基础之Streams-三"><a href="#重走Java基础之Streams-三" class="headerlink" title="重走Java基础之Streams 三"></a>重走Java基础之Streams 三</h1><p>接<a href="https://muyinchen.github.io/2017/01/14/%E9%87%8D%E8%B5%B0Java%E5%9F%BA%E7%A1%80%E4%B9%8BStreams(%E4%BA%8C">重走Java基础之Streams(二)</a>)</p>
<h3 id="Creating-a-Stream"><a href="#Creating-a-Stream" class="headerlink" title="Creating a Stream"></a>Creating a Stream</h3><a id="more"></a>
<p>所有java<code>Collection</code>都有<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#stream--" target="_blank" rel="noopener"><code>stream()</code></a> 和<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#parallelStream--" target="_blank" rel="noopener"><code>parallelStream()</code></a>方法可以从中构造一个<code>Stream</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; stringList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">Stream&lt;String&gt; stringStream = stringList.parallelStream();</span><br></pre></td></tr></table></figure>
<p>可以使用以下两种方法之一从数组创建<code>Stream</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] values = &#123; <span class="string">"aaa"</span>, <span class="string">"bbbb"</span>, <span class="string">"ddd"</span>, <span class="string">"cccc"</span> &#125;;</span><br><span class="line">Stream&lt;String&gt; stringStream = Arrays.stream(values);</span><br><span class="line">Stream&lt;String&gt; stringStreamAlternative = Stream.of(values);</span><br></pre></td></tr></table></figure>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#stream-T:A-" target="_blank" rel="noopener"><code>Arrays.stream()</code></a> 和<a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T...-" target="_blank" rel="noopener"><code>Stream .of()</code></a>不同之处在于 <code>Stream.of()</code>有一个varargs参数，因此可以像下面这样使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; integerStream = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>还有一些primitive(原始的,原函数，看下面例子便知道什么意思了)<code>Stream</code>s，你可以使用。 例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream intStream = IntStream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">DoubleStream doubleStream = DoubleStream.of(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>);</span><br></pre></td></tr></table></figure>
<p>这些primitive streams (原始流)也可以使用<code>Arrays.stream()</code>方法构造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntStream intStream = Arrays.stream(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;);</span><br></pre></td></tr></table></figure>
<p>可以从具有指定范围的数组创建一个<code>Stream</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] values= <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">IntStream intStram = Arrays.stream(values, <span class="number">1</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>注意任何primitive streams (原始流)可以使用<code>boxed</code>方法转换为boxed类型流：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; integerStream = intStream.boxed();</span><br></pre></td></tr></table></figure>
<p>这在某些情况下可能是有用的，如果你想收集数据，因为primitive streams (原始流)没有任何可以需要一个<code>Collector</code>来作为参数的<code>collect</code>方法。</p>
<h4 id="再多举几个例子："><a href="#再多举几个例子：" class="headerlink" title="再多举几个例子："></a>再多举几个例子：</h4><h5 id="1-计算列表中的元素数"><a href="#1-计算列表中的元素数" class="headerlink" title="1.计算列表中的元素数"></a>1.计算列表中的元素数</h5><p>注意需</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; list = IntStream.range(<span class="number">1</span>, <span class="number">100</span>).boxed().collect(Collectors.toList());</span><br><span class="line">System.out.println(list.stream().count());</span><br></pre></td></tr></table></figure>
<h5 id="2-计算列表中元素的平均数"><a href="#2-计算列表中元素的平均数" class="headerlink" title="2. 计算列表中元素的平均数"></a>2. 计算列表中元素的平均数</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Double avarage = list.stream().collect(Collectors.averagingInt(item -&gt; item));</span><br></pre></td></tr></table></figure>
<h5 id="3-对列表元素进行统计"><a href="#3-对列表元素进行统计" class="headerlink" title="3. 对列表元素进行统计"></a>3. 对列表元素进行统计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = IntStream.range(<span class="number">1</span>, <span class="number">100</span>).boxed().collect(Collectors.toList());</span><br><span class="line">IntSummaryStatistics iss = list.stream().collect(Collectors.summarizingInt(value -&gt; value));</span><br><span class="line">System.out.println(iss);</span><br></pre></td></tr></table></figure>
<p>​<br>输出结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntSummaryStatistics&#123;count=<span class="number">99</span>, sum=<span class="number">4950</span>, min=<span class="number">1</span>, average=<span class="number">50.000000</span>, max=<span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-根据List创建Map"><a href="#4-根据List创建Map" class="headerlink" title="4. 根据List创建Map"></a>4. 根据List创建Map</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = IntStream.range(<span class="number">1</span>, <span class="number">100</span>).boxed().collect(Collectors.toList());</span><br><span class="line">Map&lt;Integer, Integer&gt; map = list.stream().collect(Collectors.toMap(p -&gt; p, q-&gt;q*<span class="number">3</span>));</span><br><span class="line">System.out.println(map);</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="number">1</span>=<span class="number">3</span>, <span class="number">2</span>=<span class="number">6</span>, <span class="number">3</span>=<span class="number">9</span>, <span class="number">4</span>=<span class="number">12</span>, <span class="number">5</span>=<span class="number">15</span>, <span class="number">6</span>=<span class="number">18</span>, <span class="number">7</span>=<span class="number">21</span>, <span class="number">8</span>=<span class="number">24</span>, <span class="number">9</span>=<span class="number">27</span>, <span class="number">10</span>=<span class="number">30</span>, <span class="number">11</span>=<span class="number">33</span>, <span class="number">12</span>=<span class="number">36</span>, <span class="number">13</span>=<span class="number">39</span>, <span class="number">14</span>=<span class="number">42</span>, <span class="number">15</span>=<span class="number">45</span>, <span class="number">16</span>=<span class="number">48</span>, <span class="number">17</span>=<span class="number">51</span>, <span class="number">18</span>=<span class="number">54</span>, <span class="number">19</span>=<span class="number">57</span>, <span class="number">20</span>=<span class="number">60</span>, <span class="number">21</span>=<span class="number">63</span>, <span class="number">22</span>=<span class="number">66</span>, <span class="number">23</span>=<span class="number">69</span>, <span class="number">24</span>=<span class="number">72</span>, <span class="number">25</span>=<span class="number">75</span>, <span class="number">26</span>=<span class="number">78</span>, <span class="number">27</span>=<span class="number">81</span>, <span class="number">28</span>=<span class="number">84</span>, <span class="number">29</span>=<span class="number">87</span>, <span class="number">30</span>=<span class="number">90</span>, <span class="number">31</span>=<span class="number">93</span>, <span class="number">32</span>=<span class="number">96</span>, <span class="number">33</span>=<span class="number">99</span>, <span class="number">34</span>=<span class="number">102</span>, <span class="number">35</span>=<span class="number">105</span>, <span class="number">36</span>=<span class="number">108</span>, <span class="number">37</span>=<span class="number">111</span>, <span class="number">38</span>=<span class="number">114</span>, <span class="number">39</span>=<span class="number">117</span>, <span class="number">40</span>=<span class="number">120</span>, <span class="number">41</span>=<span class="number">123</span>, <span class="number">42</span>=<span class="number">126</span>, <span class="number">43</span>=<span class="number">129</span>, <span class="number">44</span>=<span class="number">132</span>, <span class="number">45</span>=<span class="number">135</span>, <span class="number">46</span>=<span class="number">138</span>, <span class="number">47</span>=<span class="number">141</span>, <span class="number">48</span>=<span class="number">144</span>, <span class="number">49</span>=<span class="number">147</span>, <span class="number">50</span>=<span class="number">150</span>, <span class="number">51</span>=<span class="number">153</span>, <span class="number">52</span>=<span class="number">156</span>, <span class="number">53</span>=<span class="number">159</span>, <span class="number">54</span>=<span class="number">162</span>, <span class="number">55</span>=<span class="number">165</span>, <span class="number">56</span>=<span class="number">168</span>, <span class="number">57</span>=<span class="number">171</span>, <span class="number">58</span>=<span class="number">174</span>, <span class="number">59</span>=<span class="number">177</span>, <span class="number">60</span>=<span class="number">180</span>, <span class="number">61</span>=<span class="number">183</span>, <span class="number">62</span>=<span class="number">186</span>, <span class="number">63</span>=<span class="number">189</span>, <span class="number">64</span>=<span class="number">192</span>, <span class="number">65</span>=<span class="number">195</span>, <span class="number">66</span>=<span class="number">198</span>, <span class="number">67</span>=<span class="number">201</span>, <span class="number">68</span>=<span class="number">204</span>, <span class="number">69</span>=<span class="number">207</span>, <span class="number">70</span>=<span class="number">210</span>, <span class="number">71</span>=<span class="number">213</span>, <span class="number">72</span>=<span class="number">216</span>, <span class="number">73</span>=<span class="number">219</span>, <span class="number">74</span>=<span class="number">222</span>, <span class="number">75</span>=<span class="number">225</span>, <span class="number">76</span>=<span class="number">228</span>, <span class="number">77</span>=<span class="number">231</span>, <span class="number">78</span>=<span class="number">234</span>, <span class="number">79</span>=<span class="number">237</span>, <span class="number">80</span>=<span class="number">240</span>, <span class="number">81</span>=<span class="number">243</span>, <span class="number">82</span>=<span class="number">246</span>, <span class="number">83</span>=<span class="number">249</span>, <span class="number">84</span>=<span class="number">252</span>, <span class="number">85</span>=<span class="number">255</span>, <span class="number">86</span>=<span class="number">258</span>, <span class="number">87</span>=<span class="number">261</span>, <span class="number">88</span>=<span class="number">264</span>, <span class="number">89</span>=<span class="number">267</span>, <span class="number">90</span>=<span class="number">270</span>, <span class="number">91</span>=<span class="number">273</span>, <span class="number">92</span>=<span class="number">276</span>, <span class="number">93</span>=<span class="number">279</span>, <span class="number">94</span>=<span class="number">282</span>, <span class="number">95</span>=<span class="number">285</span>, <span class="number">96</span>=<span class="number">288</span>, <span class="number">97</span>=<span class="number">291</span>, <span class="number">98</span>=<span class="number">294</span>, <span class="number">99</span>=<span class="number">297</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-求列表元素的最大数"><a href="#5-求列表元素的最大数" class="headerlink" title="5. 求列表元素的最大数"></a>5. 求列表元素的最大数</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> Random().ints(-<span class="number">100</span>,<span class="number">100</span>).limit(<span class="number">250</span>).boxed().collect(Collectors.toList());</span><br><span class="line">Optional&lt;Integer&gt; max = list.stream().reduce(Math::max);</span><br><span class="line">max.ifPresent(value -&gt; System.out.println(value));</span><br></pre></td></tr></table></figure>
<p>应该有些理解了吧。</p>
<p><strong>重用a stream chain(一个流链)的中间操作</strong></p>
<p>当终端操作被调用时，流被关闭。当我们的需求只有发生在终端操作的改变时，可以 重复使用中间操作流。 我们可以创建 a stream supplier(一个流供应者)来构造一个已经建立了所有中间操作的新流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Supplier&lt;Stream&lt;String&gt;&gt; streamSupplier = () -&gt; Stream.of(<span class="string">"apple"</span>, <span class="string">"banana"</span>,<span class="string">"orange"</span>, <span class="string">"grapes"</span>, <span class="string">"melon"</span>,<span class="string">"blueberry"</span>,<span class="string">"blackberry"</span>)</span><br><span class="line">.map(String::toUpperCase).sorted();</span><br><span class="line"></span><br><span class="line">  streamSupplier.get().filter(s -&gt;   s.startsWith(<span class="string">"A"</span>)).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">// APPLE</span></span><br><span class="line"></span><br><span class="line">  streamSupplier.get().filter(s -&gt; s.startsWith(<span class="string">"B"</span>)).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// BANANA</span></span><br><span class="line">  <span class="comment">// BLACKBERRY</span></span><br><span class="line">  <span class="comment">// BLUEBERRY</span></span><br></pre></td></tr></table></figure>
<p><code>int []</code>数组可以使用流转换为<code>List</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ints = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">List&lt;Integer&gt; list = IntStream.of(ints).boxed().collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<h3 id="通过-flatMap-来扁平化处理流"><a href="#通过-flatMap-来扁平化处理流" class="headerlink" title="通过 flatMap()来扁平化处理流"></a><code>通过 flatMap()来扁平化处理流</code></h3><p>A <code>Stream</code> of items that are in turn streamable can be flattened into a single continuous <code>Stream</code>:<br>flatMap：和map类似，不同的是其每个元素转换得到的是Stream对象，会把子Stream中的元素压缩到父集合中</p>
<p>map和flatMap方法示意图：</p>
<p><img src="http://og0sybnix.bkt.clouddn.com/T2PQJnXOJXXXXXXXXX_%21%2190219132.jpg" alt=""></p>
<p>可以看出map只转换</p>
<p><img src="http://og0sybnix.bkt.clouddn.com/T2mBXnXQhXXXXXXXXX_%21%2190219132.jpg" alt=""></p>
<p>可以看出flatMap不仅转换，又进一步合并了一下，将多个子Stream合并为一个Stream。</p>
<p>由下面例子可以看出，大的 <code>Stream</code>中的子 <code>Stream</code>可以被扁平化处理为单个连续的 <code>Stream</code>：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"a"</span>, Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">map.put(<span class="string">"b"</span>, Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>));</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; allValues = map.values() <span class="comment">// Collection&lt;List&lt;Integer&gt;&gt;</span></span><br><span class="line">        .stream()                      <span class="comment">// Stream&lt;List&lt;Integer&gt;&gt;</span></span><br><span class="line">        .flatMap(List::stream)         <span class="comment">// Stream&lt;Integer&gt;</span></span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(allValues);</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure></p>
<p>含<code>Map</code>的<code>List</code>可以被扁平化处理成一个连续的<code>Stream</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, String&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">Map&lt;String,String&gt; map1 = <span class="keyword">new</span> HashMap();</span><br><span class="line">map1.put(<span class="string">"1"</span>, <span class="string">"one"</span>);</span><br><span class="line">map1.put(<span class="string">"2"</span>, <span class="string">"two"</span>);</span><br><span class="line"></span><br><span class="line">Map&lt;String,String&gt; map2 = <span class="keyword">new</span> HashMap();</span><br><span class="line">map2.put(<span class="string">"3"</span>, <span class="string">"three"</span>);</span><br><span class="line">map2.put(<span class="string">"4"</span>, <span class="string">"four"</span>);</span><br><span class="line">list.add(map1);</span><br><span class="line">list.add(map2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Set&lt;String&gt; output= list.stream()  <span class="comment">//  Stream&lt;Map&lt;String, String&gt;&gt;</span></span><br><span class="line">    .map(Map::values)              <span class="comment">// Stream&lt;List&lt;String&gt;&gt;</span></span><br><span class="line">    .flatMap(Collection::stream)   <span class="comment">// Stream&lt;String&gt;</span></span><br><span class="line">    .collect(Collectors.toSet());  <span class="comment">//Set&lt;String&gt;</span></span><br><span class="line">[one, two, three,four]</span><br></pre></td></tr></table></figure>
<h3 id="使用Streams实现数学函数"><a href="#使用Streams实现数学函数" class="headerlink" title="使用Streams实现数学函数"></a>使用Streams实现数学函数</h3><p><code>Stream</code>s，尤其是 <code>IntStream</code>s，是一种实现求和项（Σ）的优雅方法。<code>Stream</code>可以用作求和的的范围边界。</p>
<p>E.g., Madhava的Pi近似值由公式给出(Source: <a href="https://en.wikipedia.org/wiki/Approximations_of_%CF%80" target="_blank" rel="noopener">wikipedia</a>): <a href="http://i.stack.imgur.com/XY9Kr.png" target="_blank" rel="noopener"><img src="http://i.stack.imgur.com/XY9Kr.png" alt="Madhava&#39;s approximation"></a></p>
<p>这可以以任意精度计算。 例如，101项次幂：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> pi = Math.sqrt(<span class="number">12</span>) * </span><br><span class="line">            IntStream.rangeClosed(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">                     .mapToDouble(k -&gt; Math.pow(-<span class="number">3</span>, -<span class="number">1</span> * k) / (<span class="number">2</span> * k + <span class="number">1</span>))</span><br><span class="line">                     .sum();</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong> 使用<code>double</code>的精度，选择29的上限就足以获得与<code>Math.Pi</code>大概一致的结果.</p>
<h3 id="使用IntStream迭代索引"><a href="#使用IntStream迭代索引" class="headerlink" title="使用IntStream迭代索引"></a>使用IntStream迭代索引</h3><p><code>stream</code>s的元素通常不允许访问当前项的索引值。 要通过访问索引来迭代数组或<code>ArrayList</code>，使用<code>IntStream.range（start，endExclusive）</code>。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] names = &#123; <span class="string">"Jon"</span>, <span class="string">"Darin"</span>, <span class="string">"Bauke"</span>, <span class="string">"Hans"</span>, <span class="string">"Marc"</span> &#125;;</span><br><span class="line"></span><br><span class="line">IntStream.range(<span class="number">0</span>, names.length)</span><br><span class="line">    .mapToObj(i -&gt; String.format(<span class="string">"#%d %s"</span>, i + <span class="number">1</span>, names[i]))</span><br><span class="line">    .forEach(System.out::println);</span><br></pre></td></tr></table></figure></p>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-" target="_blank" rel="noopener"><code>range（start，endExclusive）</code></a> 方法返回另一个 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html" target="_blank" rel="noopener"><code>ÌntStream</code></a>并和 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-" target="_blank" rel="noopener"><code>mapToObj(mapper)</code></a>返回一个String。</p>
<p>Output:</p>
<p>这非常类似于使用带有计数器的正常的for循环，但是具有流水线和并行化的优点：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">    String newName = String.format(<span class="string">"#%d %s"</span>, i + <span class="number">1</span>, names[i]);</span><br><span class="line">    System.out.println(newName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="连接流"><a href="#连接流" class="headerlink" title="连接流"></a>连接流</h3><p>变量声明示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; abc = Arrays.asList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);</span><br><span class="line">Collection&lt;String&gt; digits = Arrays.asList(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>);</span><br><span class="line">Collection&lt;String&gt; greekAbc = Arrays.asList(<span class="string">"alpha"</span>, <span class="string">"beta"</span>, <span class="string">"gamma"</span>);</span><br></pre></td></tr></table></figure>
<p><strong>Example 1 - 连接两个流</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Stream&lt;String&gt; concat1 = Stream.concat(abc.stream(), digits.stream());</span><br><span class="line"></span><br><span class="line">concat1.forEach(System.out::print);</span><br><span class="line"><span class="comment">// prints: abc123</span></span><br></pre></td></tr></table></figure>
<p><strong>Example 2 -连接多个流</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Stream&lt;String&gt; concat2 = Stream.concat(</span><br><span class="line">    Stream.concat(abc.stream(), digits.stream()),</span><br><span class="line">    greekAbc.stream());</span><br><span class="line"></span><br><span class="line">System.out.println(concat2.collect(Collectors.joining(<span class="string">", "</span>)));</span><br><span class="line"><span class="comment">// prints: a, b, c, 1, 2, 3, alpha, beta, gamma</span></span><br></pre></td></tr></table></figure>
<p>或者为了简化嵌套的<code>concat()</code>语法我们也可以使用<code>flatMap()</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Stream&lt;String&gt; concat3 = Stream.of(</span><br><span class="line">    abc.stream(), digits.stream(), greekAbc.stream())</span><br><span class="line">    .flatMap(s -&gt; s);</span><br><span class="line">    <span class="comment">// or `.flatMap(Function.identity());` (java.util.function.Function)</span></span><br><span class="line"></span><br><span class="line">System.out.println(concat3.collect(Collectors.joining(<span class="string">", "</span>)));</span><br><span class="line"><span class="comment">// prints: a, b, c, 1, 2, 3, alpha, beta, gamma</span></span><br></pre></td></tr></table></figure>
<p>在从重复连接构造<code>Stream</code>s 时要小心，因为访问深度并置的<code>Stream</code>的元素可能导致深层调用链或者甚至是<code>StackOverflowException</code>(本就是栈操作)。</p>
<h3 id="IntStream-to-String"><a href="#IntStream-to-String" class="headerlink" title="IntStream to String"></a>IntStream to String</h3><p>Java没有<em> Char Stream </em>，所以当使用<code>String</code>s并构造一个<code>Character</code>的<code>Character</code>s时，一个选项是使用<code>String.codePoints()</code>方法获取一个<a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html" target="_blank" rel="noopener"><code>IntStream</code></a> ,所以<code>IntStream</code>可以得到如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> IntStream <span class="title">stringToIntStream</span><span class="params">(String in)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> in.codePoints();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更多的涉及做其他方式的转换，即IntStreamToString。 可以这样做：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">intStreamToString</span><span class="params">(IntStream intStream)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> intStream.collect(StringBuilder::<span class="keyword">new</span>, StringBuilder::appendCodePoint, StringBuilder::append).toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用流和方法引用来编写自己的文档化流程代码"><a href="#使用流和方法引用来编写自己的文档化流程代码" class="headerlink" title="使用流和方法引用来编写自己的文档化流程代码"></a>使用流和方法引用来编写自己的文档化流程代码</h3><p>通过方法引用来创建具有帅气风格的文档化代码，使用带有Stream的方法引用使得复杂的过程易于阅读和理解(所以才说流程)。 考虑下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Valued</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">Ordered</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasPropertyTwo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">getValue</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Thing</span>&lt;<span class="title">V</span> <span class="keyword">extends</span> <span class="title">Ordered</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasPropertyOne</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Valued&lt;V&gt; <span class="title">getValuedProperty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> &lt;V extends Ordered&gt; <span class="function">List&lt;V&gt; <span class="title">myMethod</span><span class="params">(List&lt;Thing&lt;V&gt;&gt; things)</span> </span>&#123;</span><br><span class="line">    List&lt;V&gt; results = <span class="keyword">new</span> ArrayList&lt;V&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Thing&lt;V&gt; thing : things) &#123;</span><br><span class="line">        <span class="keyword">if</span> (thing.hasPropertyOne()) &#123;</span><br><span class="line">            Valued&lt;V&gt; valued = thing.getValuedProperty();</span><br><span class="line">            <span class="keyword">if</span> (valued != <span class="keyword">null</span> &amp;&amp; valued.hasPropertyTwo())&#123;</span><br><span class="line">                V value = valued.getValue();</span><br><span class="line">                <span class="keyword">if</span> (value != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    results.add(value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    results.sort((a, b)-&gt;&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.compare(a.getOrder(), b.getOrder());</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后使用<code>Stream</code>s和方法引用重写的自定义的方法更易读，而且每个步骤都很容易理解 - 它不仅更短，还显示了哪些接口和类负责每个 步：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;V extends Ordered&gt; <span class="function">List&lt;V&gt; <span class="title">myMethod</span><span class="params">(List&lt;Thing&lt;V&gt;&gt; things)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> things.stream()</span><br><span class="line">        .filter(Thing::hasPropertyOne)</span><br><span class="line">        .map(Thing::getValuedProperty)</span><br><span class="line">        .filter(Objects::nonNull)</span><br><span class="line">        .filter(Valued::hasPropertyTwo)</span><br><span class="line">        .map(Valued::getValue)</span><br><span class="line">        .filter(Objects::nonNull)</span><br><span class="line">        .sorted(Comparator.comparing(Ordered::getOrder))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>未完待续：</p>
<p>部分参考示图源自：<a href="http://ifeve.com/stream/" target="_blank" rel="noopener">http://ifeve.com/stream/</a><br>部分示例源自：<a href="http://blog.csdn.net/chszs/article/details/47038607" target="_blank" rel="noopener">http://blog.csdn.net/chszs/article/details/47038607</a></p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Java 8">
    <span class="tag-code">Java 8</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2017/01/14/重走Java基础之Streams 二/">
        <span class="nav-arrow">← </span>
        
          重走Java基础之Streams 二
        
      </a>
    
    
      <a class="nav-right" href="/2017/01/16/重走Java基础之Streams 四/">
        
          重走Java基础之Streams 四
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#重走Java基础之Streams-三"><span class="toc-nav-text">重走Java基础之Streams 三</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Creating-a-Stream"><span class="toc-nav-text">Creating a Stream</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#再多举几个例子："><span class="toc-nav-text">再多举几个例子：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#1-计算列表中的元素数"><span class="toc-nav-text">1.计算列表中的元素数</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#2-计算列表中元素的平均数"><span class="toc-nav-text">2. 计算列表中元素的平均数</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#3-对列表元素进行统计"><span class="toc-nav-text">3. 对列表元素进行统计</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#4-根据List创建Map"><span class="toc-nav-text">4. 根据List创建Map</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#5-求列表元素的最大数"><span class="toc-nav-text">5. 求列表元素的最大数</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#通过-flatMap-来扁平化处理流"><span class="toc-nav-text">通过 flatMap()来扁平化处理流</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#使用Streams实现数学函数"><span class="toc-nav-text">使用Streams实现数学函数</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#使用IntStream迭代索引"><span class="toc-nav-text">使用IntStream迭代索引</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#连接流"><span class="toc-nav-text">连接流</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#IntStream-to-String"><span class="toc-nav-text">IntStream to String</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#使用流和方法引用来编写自己的文档化流程代码"><span class="toc-nav-text">使用流和方法引用来编写自己的文档化流程代码</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://muyinchen.github.io/2017/01/15/重走Java基础之Streams 三/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "yanm1ng";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "重走Java基础之Streams 三",
        owner: "yanm1ng",
        repo: "yanm1ng.github.io",
        oauth: {
          client_id: "0f87e490e00ee3fd87ef",
          client_secret: "4a9d2b148e7971c2201ad12131ce8bf8159ccd2e"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

<script>
  var disqus_shortname = '';
  
  var disqus_url = 'https://muyinchen.github.io/2017/01/15/重走Java基础之Streams 三/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2019 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>